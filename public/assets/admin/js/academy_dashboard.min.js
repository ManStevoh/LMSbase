var netProfitChart = document.getElementById("netProfitChart2").getContext('2d');
var certChart = document.getElementById("certChart").getContext('2d');

var netProfitChartInstance = null;
var certChartInstance = null;

function makeNetProfitChart(badge, labels, datasets) {
  if (netProfitChartInstance) {
    netProfitChartInstance.destroy(); // Destroy the previous instance if it exists
  }

  netProfitChartInstance = new Chart(netProfitChart, {
    type: 'bar',
    data: {
      labels: labels,
      datasets: [{
        label: badge,
        data: datasets,
        barPercentage: 0.5,
        barThickness: 20,
        maxBarThickness: 20,
        minBarLength: 2,
        borderColor: '#6777ef',
        backgroundColor: [
          '#43d477', '#1f3b64', '#ffab00', '#ff6384', '#36a2eb', '#cc65fe', '#ffce56', '#e7e9ed', '#4bc0c0', '#f7786b',
          '#c94c4c', '#ff6f61', '#6b5b95', '#88b04b', '#d65076', '#45b8ac', '#e15d44', '#7fcdcd', '#bc243c', '#f7cac9',
          '#92a8d1', '#034f84', '#f7786b', '#deeaee', '#b565a7', '#009b77', '#dd4124', '#d65076', '#45b8ac', '#e15d44',
          '#7fcdcd'
        ],
        pointBackgroundColor: '#fff',
        pointBorderColor: '#6777ef',
      }]
    },
    options: {
      responsive: true,
      maintainAspectRatio: false,
      legend: {
        display: false
      },
      scales: {
        yAxes: [{
          gridLines: {
            display: false,
            drawBorder: false
          },
          ticks: {
            stepSize: 150
          }
        }],
        xAxes: [{
          gridLines: {
            color: '#fbfbfb',
            lineWidth: 2
          }
        }]
      }
    }
  });
}

function makeNetCertChart(badge, labels, datasets) {
  if (certChartInstance) {
    certChartInstance.destroy(); // Destroy the previous instance if it exists
  }

  certChartInstance = new Chart(certChart, {
    type: 'bar',
    data: {
      labels: labels,
      datasets: [{
        label: badge,
        data: datasets,
        barPercentage: 0.5,
        barThickness: 20,
        maxBarThickness: 20,
        minBarLength: 2,
        borderColor: '#6777ef',
        backgroundColor: [
          '#FF6B6B', '#4ECDC4', '#45B7D1', '#96CEB4', '#FFEEAD',
          '#D4A5A5', '#9B59B6', '#3498DB', '#E74C3C', '#2ECC71',
          '#F1C40F', '#1ABC9C', '#FF8C00', '#8E44AD', '#2980B9',
          '#E67E22', '#27AE60', '#F39C12', '#16A085', '#D35400',
          '#C0392B', '#7F8C8D', '#2C3E50', '#BDC3C7', '#8E44AD',
          '#2980B9', '#E67E22', '#27AE60', '#F39C12', '#16A085'
        ],
        pointBackgroundColor: '#fff',
        pointBorderColor: '#6777ef',
      }]
    },
    options: {
      responsive: true,
      maintainAspectRatio: false,
      legend: {
        display: false
      },
      scales: {
        yAxes: [{
          gridLines: {
            display: false,
            drawBorder: false
          },
          ticks: {
            stepSize: 150
          }
        }],
        xAxes: [{
          gridLines: {
            color: '#fbfbfb',
            lineWidth: 2
          }
        }]
      }
    }
  });
}

// Rest of the code remains the same
function getSaleStatisticsData(type) {
  $.post(adminPanelPrefix + '/academy/getEnrollmentsChart', {
    type: type
  }, function (result) {
    if (result && result.code == 200) {
      makeNetProfitChart('Sale', result.chart.labels, result.chart.data);
    }
  });
}

function getSaleStatisticsData2(type) {
  $.post(adminPanelPrefix + '/academy/getCertChart', {
    type: type
  }, function (result) {
    if (result && result.code == 200) {
      makeNetCertChart('Sale', result.chart.labels, result.chart.data);
    }
  });
}

(function () {
  "use strict";

  $('body').on('click', '.js-sale-chart-month', function (e) {
    e.preventDefault();
    $(this).addClass('btn-primary');
    $('.js-sale-chart-year').removeClass('btn-primary');
    getSaleStatisticsData('day_of_month');
  });
  $('body').on('click', '.js-sale-chart-year', function (e) {
    e.preventDefault();
    $(this).addClass('btn-primary');
    $('.js-sale-chart-month').removeClass('btn-primary');
    getSaleStatisticsData('month_of_year');
  });

  $('body').on('click', '.js-sale-chart-month2', function (e) {
    e.preventDefault();
    $(this).addClass('btn-primary');
    $('.js-sale-chart-year2').removeClass('btn-primary');
    getSaleStatisticsData2('day_of_month');
  });
  $('body').on('click', '.js-sale-chart-year2', function (e) {
    e.preventDefault();
    $(this).addClass('btn-primary');
    $('.js-sale-chart-month2').removeClass('btn-primary');
    getSaleStatisticsData2('month_of_year');
  });

})(jQuery);
